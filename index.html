<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <title>Frontend Mentor | Contact form</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet üëç -->
  <style>
    .attribution { font-size: 11px; text-align: center; }
    .attribution a { color: hsl(228, 45%, 44%); }
    @font-face {src: url('Karla-Regular.ttf'); font-family: 'Karla'; font-weight: 400;}
    @font-face {src: url('Karla-Bold.ttf'); font-family: 'Karla'; font-weight: 700;}
    body{font-family: 'Karla';}
    input, .radios{border: solid hsl(186, 15%, 59%) 1px; border-radius: 6px}
    .wrong{border: solid hsl(0, 66%, 54%) 1px; border-radius: 6px}
    .required::after{content: ' *'; color: hsl(169, 82%, 27%)}
  </style>
  <style type="text/tailwindcss">
    @import "tailwindcss";
    @theme{
      --color-green-200: hsl(148, 38%, 91%);
      --color-green-600: hsl(169, 82%, 27%);
      --color-red-400: hsl(0, 66%, 54%);
      --color-grey-900: hsl(187, 24%, 22%);
    }
    label, h2{
      color: hsl(187, 24%, 22%);
    }
  </style>
</head>
<body class="bg-green-200 flex flex-col items-center min-h-screen xl:pt-[6vh]">
  <section id="sent" class="bg-grey-900 rounded-xl fixed z-2 mt-[10px] text-white inline-block select-none w-[75vw] md:w-[50vw] invisible p-4">
    <img src="icon-success-check.svg" alt="">Message Sent!
    Thanks for completing the form. We'll be in touch soon!
  </section>
<main class="absolute top-5 md:top-40 flex flex-col rounded-2xl bg-white w-[94vw] xl:w-[50vw] p-4 mt-0 gap-y-[20px]">
  <h1 class="text-2xl font-bold">Contact Us</h1>
  <section class="md:flex md:flex-row md:justify-between md:gap-x-[10px]">
    <section class="flex flex-col md:w-full">
      <label for="firstname" class="required">First Name</label>
      <input type="text" id="fn" name="firstname" class="h-[40px] pl-2">
      <h3 class="text-red-400 hidden" id="empty_fn">This field is required</h3>
    </section>

    <section class="flex flex-col md:w-full">
      <label for="lastname" class="required">Last Name</label>
      <input type="text" id="ln" name="lastname" class="h-[40px] pl-2">
      <h3 class="text-red-400 hidden" id="empty_ln">This field is required</h3>
    </section>
  </section>

  <section class="flex flex-col">
    <label for="email" class="required">Email Address</label>
    <input type="email" name="email" id="email" class="h-[40px] pl-2">
    <h3 class="text-red-400 hidden" id="notValidEmail">Please enter a valid email address</h3>
  </section>
  <section class="flex flex-col gap-y-[20px]">
    <h2 class="required">Query Type</h2>
    <div class="radios flex flex-row p-3 pl-4 pr-4">
      <input type="radio" name="general" id="general" value="general">
      <label for="general" class='ml-3'>General Enquiry</h2>
      </div>
    <div class="radios flex flex-row p-3 pl-4 pr-4">
      <input type="radio" name="general" id="support" value="support">
      <label for="support" class='ml-3'>Support Request</label>
    </div>
    <h3 class="text-red-400 hidden" id="empty_query">Please select a query type</h3>
    </section>
  <section class="flex flex-col">
    <label for="message" class="required">Message</label>
    <textarea type="text" id="message" name="message" class="h-[290px] pl-2 radios xl:h-[120px]"></textarea>
    <h3 class="text-red-400 hidden" id="empty_message">This field is required</h3>
  </section>

  <section class="flex flex-row">
    <input type="checkbox" name="vazhno" id="checkbox">
    <label for="vazhno" class='ml-5 required'>I consent to being contacted by the team</label>
  </section>
  <h3 class="text-red-400 hidden" id="empty_checkbox">To submit this form, please consent to being contacted</h3>

  <button id="submit" type="submit" onclick="checkAll()" class="p-4 bg-green-600 text-white font-bold rounded-md">Submit</button>

</main>
  <script type="text/javascript">
    const fn = document.getElementById('fn');
    const fnvalue = fn.value || 0;
    const ln = document.getElementById('ln');
    const lnvalue = ln.value || 0;
    const sent = document.getElementById('sent');
    const email = document.getElementById('email');
    const checkbox = document.getElementById('checkbox');

    const empty_fn = document.getElementById('empty_fn');
    const empty_ln = document.getElementById('empty_ln');
    const empty_query = document.getElementById('empty_query');
    const empty_message = document.getElementById('empty_message');
    const empty_checkbox = document.getElementById('empty_checkbox')
    const notValidEmail = document.getElementById('notValidEmail');

    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }
    function check_empty(input){
      const reg = /^[a-zA-Z–∞-—è–ê-–Ø]*$/;
      return reg.test(input.value);
    }
    function check_message(input){
      const rege = /./;
      return rege.test(input.value);
    }
    function showPopup(){
      sent.classList.remove('invisible');
      setTimeout(function() {
        sent.classList.add('invisible');
    }, 3000);
    }
    function checkAll(){    
      const queries = document.querySelector('input[name="general"]:checked');
      let isValid1, isValid2, isValid3, isValid4, isValid5, isValid6;
      if (!check_empty(fn)){
        empty_fn.classList.remove('hidden');
        isValid1 = false;
      }
      else{
        empty_fn.classList.add('hidden');
        isValid1 = true;
      };
      if (!check_empty(ln)){
        empty_ln.classList.remove('hidden');
        isValid2 = false;
      }
      else{
        empty_ln.classList.add('hidden');
        isValid2 = true;
      };
      if (!validateEmail(email.value)){
        notValidEmail.classList.remove('hidden');
        isValid3 = false;
      }
      else{
        notValidEmail.classList.add('hidden');
        isValid3 = true;
      };
      if (!check_message(message)){
        empty_message.classList.remove('hidden');
        isValid4 = false;
      }
      else{
        empty_message.classList.add('hidden');
        isValid4 = true;
      };
      if (!queries){
        empty_query.classList.remove('hidden');
        isValid5 = false;
      }
      else{
        empty_query.classList.add('hidden');
        isValid5 = true;
      }
      if (!checkbox.checked){
        empty_checkbox.classList.remove('hidden');
        isValid6 = false;
    } else {
        empty_checkbox.classList.add('hidden');
        isValid6 = true;
    }

      if (isValid1 === true && isValid2 === true && isValid3 === true && isValid4 === true && isValid5 === true && isValid6 === true){
        showPopup();
      }
      else{
        console.log('–Ω–∏—Ö—É—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —è —Ö–∑ –ø–æ—á–µ–º—É');
        document.getElementById('sent').classList.add('invisible');
      }
    }

    fn.addEventListener('input', function(){
      if (!check_empty(fn) && fnvalue == 0){
        empty_fn.classList.remove('hidden');
        fn.classList.add('wrong');
      }
      else{
        empty_fn.classList.add('hidden');
        fn.classList.remove('wrong');
      }
    })
    ln.addEventListener('input', function(){
      if (!check_empty(ln) && lnvalue == 0){
        empty_ln.classList.remove('hidden');
        ln.classList.add('wrong');
      }
      else{
        empty_ln.classList.add('hidden');
        ln.classList.remove('wrong');
      }
    })
    email.addEventListener('input', function(){
      if (!validateEmail(email.value)){
        notValidEmail.classList.remove('hidden');
        email.classList.add('wrong');
      }
      else{
        notValidEmail.classList.add('hidden');
        email.classList.remove('wrong');
      }
    })
    message.addEventListener('input', function(){
      if (!check_message(message)){
        empty_message.classList.remove('hidden');
        message.classList.add('wrong');
      }
      else{
        empty_message.classList.add('hidden');
        message.classList.remove('wrong');
      }
    })
    checkbox.addEventListener('input', function(){
      if (!checkbox.checked){
        empty_checkbox.classList.remove('hidden');
    } else {
        empty_checkbox.classList.add('hidden');
    }
    })
  </script>
</body>
</html>
